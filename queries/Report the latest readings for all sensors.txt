select ?sensor, ?timestamp, ?observationValue
where {
    ?observation <http://purl.oclc.org/NET/ssnx/ssn#hasValue> ?observationValue .
    ?observation <http://purl.oclc.org/NET/ssnx/ssn#endTime> ?timestamp .
    ?observation <uri://opensheffield.org/properties#sensor> ?sensor .

    {
        select (max(?r) AS ?observation)
        where {
            ?r a <http://purl.oclc.org/NET/ssnx/ssn#ObservationValue> .
            ?r <uri://opensheffield.org/properties#sensor> ?sensor .
        }
        GROUP BY ?sensor
    }
}
